(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const{useState:d,useEffect:v,useRef:w}=React,p={hiragana:[["あ","い","う","え","お"],["か","き","く","け","こ"],["さ","し","す","せ","そ"],["た","ち","つ","て","と"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ま","み","む","め","も"],["や","ゆ","よ"],["ら","り","る","れ","ろ"],["わ","を","ん"]],romaji:[["a","i","u","e","o"],["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wo","n"]]},N=()=>{const s=new Map;return p.hiragana.forEach((r,a)=>{r.forEach((i,e)=>s.set(i,p.romaji[a][e]))}),s},C=s=>{const r=[...s];for(let a=r.length-1;a>0;a--){const i=Math.floor(Math.random()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r},j=({char:s,onAnswerCheck:r})=>{const[a,i]=d(""),[e,n]=d(null),l=w(null),f=N().get(s),y=t=>{const u=t.target.value.replace(/\d/g,"");i(u)},h=()=>{if(!a.trim())return;const t=a.toLowerCase()===f;n(t),r(s,t)},E=t=>{t.key==="Enter"&&h()},c=()=>{a.trim()&&h()},o=()=>{l.current&&e===null&&l.current.focus()};return React.createElement("div",{className:`hiragana-card ${e===!0?"correct":e===!1?"incorrect":""}`,"data-hiragana":s,onClick:o},React.createElement("div",{className:"hiragana-display"},s),React.createElement("div",{className:"input-container"},e===!0?React.createElement("span",{className:"romaji-answer"},f):React.createElement("input",{type:"text",className:"romaji-input",placeholder:"...",value:a,onChange:y,onKeyPress:E,onBlur:c,ref:l})))},k=()=>{const[s,r]=d([]),[a,i]=d(0),[e,n]=d(!1),l=p.hiragana.flat().length,g=w(new Map),f=()=>{const c=p.hiragana.flat(),o=C(c);r(o),i(0),n(!1);const t=new Map;o.forEach(u=>{t.set(u,{correct:!1,attempts:0})}),g.current=t};v(()=>{f()},[]);const y=(c,o)=>{const t=g.current.get(c);t.attempts++,o&&!t.correct&&(t.correct=!0,i(u=>u+1)),a===l&&n(!0)},h=()=>{f()},E=()=>{const c=document.querySelectorAll(".hiragana-card"),o=document.activeElement,t=o?o.closest(".hiragana-card"):null;if(console.log(t),t){const u=Array.from(c).indexOf(t);for(let m=u+1;m<c.length;m++){const R=c[m].querySelector(".romaji-input");if(R&&(!R.value.trim()||c[m].classList.contains("incorrect"))){R.focus();return}}}for(let u of c){const m=u.querySelector(".romaji-input");if(m&&(!m.value.trim()||u.classList.contains("incorrect"))){m.focus();return}}};return v(()=>{const c=o=>{if(o.key==="Enter"){const t=document.activeElement;t&&t.classList.contains("romaji-input")&&(o.preventDefault(),E())}};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[a]),React.createElement(React.Fragment,null,React.createElement("h1",{className:"page-title"},"平假名练习"),React.createElement("div",{className:"container"},React.createElement("div",{className:"hiragana-area"},s.map((c,o)=>React.createElement(j,{key:o,char:c,onAnswerCheck:y})))),React.createElement("div",{className:"score-display"},"得分: ",a,"/",l),React.createElement("button",{className:"reset-button",onClick:h},"重置"),e&&React.createElement("div",{className:"win-message"},"恭喜你！全部答对了！"))},A=ReactDOM.createRoot(document.getElementById("root"));A.render(React.createElement(k,{tab:"home"}));
