(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const{useState:h,useEffect:N,useRef:b}=React,C={hiragana:[["あ","い","う","え","お"],["か","き","く","け","こ"],["さ","し","す","せ","そ"],["た","ち","つ","て","と"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ま","み","む","め","も"],["や","ゆ","よ"],["ら","り","る","れ","ろ"],["わ","を","ん"]],romaji:[["a","i","u","e","o"],["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wo","n"]]},w={katakana:[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["サ","シ","ス","セ","ソ"],["タ","チ","ツ","テ","ト"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["マ","ミ","ム","メ","モ"],["ヤ","ユ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヲ","ン"]],romaji:[["a","i","u","e","o"],["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wo","n"]]},j=a=>{const n=new Map;return a[Object.keys(a)[0]].forEach((o,c)=>{o.forEach((t,r)=>n.set(t,a.romaji[c][r]))}),n},S=a=>{const n=[...a];for(let o=n.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1));[n[o],n[c]]=[n[c],n[o]]}return n},A=({char:a,onAnswerCheck:n,characterSet:o})=>{const[c,t]=h(""),[r,m]=h(null),f=b(null),d=j(o==="hiragana"?C:w).get(a),p=e=>{const s=e.target.value.replace(/\d/g,"");t(s)},g=()=>{if(!c.trim())return;const e=c.toLowerCase()===d;m(e),n(a,e)},E=e=>{e.key==="Enter"&&g()},k=()=>{c.trim()&&g()},R=()=>{f.current&&r===null&&f.current.focus()};return React.createElement("div",{className:`hiragana-card ${r===!0?"correct":r===!1?"incorrect":""}`,"data-character":a,onClick:R},React.createElement("div",{className:"hiragana-display"},a),React.createElement("div",{className:"input-container"},r===!0?React.createElement("span",{className:"romaji-answer"},d):React.createElement("input",{type:"text",className:"romaji-input",placeholder:"...",value:c,onChange:p,onKeyPress:E,onBlur:k,ref:f})))},L=({activeTab:a,onTabChange:n,score:o,total:c})=>React.createElement("div",{className:"tabs-container"},React.createElement("div",{className:"tabs"},React.createElement("button",{className:`tab-button ${a==="hiragana"?"active":""}`,onClick:()=>n("hiragana")},"平假名"),React.createElement("button",{className:`tab-button ${a==="katakana"?"active":""}`,onClick:()=>n("katakana")},"片假名")),React.createElement("div",{className:"score-display"},"得分: ",o,"/",c)),M=()=>{const[a,n]=h(()=>localStorage.getItem("characterSet")||"hiragana"),[o,c]=h([]),[t,r]=h(0),[m,f]=h(!1),y=(a==="hiragana"?C.hiragana:w.katakana).flat().length,d=b(new Map),p=()=>{const e=(a==="hiragana"?C.hiragana:w.katakana).flat(),s=S(e);c(s),r(0),f(!1);const i=new Map;s.forEach(l=>{i.set(l,{correct:!1,attempts:0})}),d.current=i};N(()=>{p()},[a]);const g=e=>{n(e),localStorage.setItem("characterSet",e)},E=(e,s)=>{const i=d.current.get(e);i.attempts++,s&&!i.correct&&(i.correct=!0,r(l=>l+1)),t===y&&f(!0)},k=()=>{p()},R=()=>{const e=document.querySelectorAll(".hiragana-card"),s=document.activeElement,i=s?s.closest(".hiragana-card"):null;if(i){const l=Array.from(e).indexOf(i);for(let u=l+1;u<e.length;u++){const v=e[u].querySelector(".romaji-input");if(v&&(!v.value.trim()||e[u].classList.contains("incorrect"))){v.focus();return}}}for(let l of e){const u=l.querySelector(".romaji-input");if(u&&(!u.value.trim()||l.classList.contains("incorrect"))){u.focus();return}}};return N(()=>{const e=s=>{if(s.key==="Enter"){const i=document.activeElement;i&&i.classList.contains("romaji-input")&&(s.preventDefault(),R())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t]),React.createElement(React.Fragment,null,React.createElement(L,{activeTab:a,onTabChange:g,score:t,total:y}),React.createElement("div",{className:"container"},React.createElement("div",{className:"hiragana-area"},o.map((e,s)=>React.createElement(A,{key:s+a,char:e,onAnswerCheck:E,characterSet:a})))),React.createElement("button",{className:"reset-button",onClick:k},"重置"),m&&React.createElement("div",{className:"win-message"},"恭喜你！全部答对了！"))},O=ReactDOM.createRoot(document.getElementById("root"));O.render(React.createElement(M,{tab:"home"}));
